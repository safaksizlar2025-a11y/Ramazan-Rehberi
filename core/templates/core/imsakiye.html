{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<div class="container py-5 mt-5">
    <div class="text-center mb-5 animate-fade-in">
        <h1 class="display-3 fw-bold mb-3">
            <span class="text-success">2026</span> Ramazan Ä°msakiyesi
        </h1>
        <div class="d-flex justify-content-center align-items-center gap-3">
            <span class="badge bg-success rounded-pill px-4 py-2 fs-6 shadow-sm">
                <i class="bi bi-geo-alt-fill"></i> {{ sehir }}
            </span>
            <span class="badge bg-warning text-dark rounded-pill px-4 py-2 fs-6 shadow-sm">
                Hicri 1447
            </span>
        </div>
        <div class="row justify-content-center mt-4">
            <div class="col-md-6 col-lg-4">
                <form method="GET" action="" class="location-picker shadow-lg">
                    <div class="input-group-custom">
                        <span class="input-icon">ğŸ“</span>
                        <select id="sehir" name="sehir" class="city-select" onchange="this.form.submit()">
                            {% for il in sehirler %}
                            <option value="{{ il }}" {% if sehir == il %}selected{% endif %}>{{ il }}</option>
                            {% endfor %}
                        </select>
                        <div class="select-arrow"></div>
                    </div>
                </form>
                <p class="text-center mt-2 small opacity-50">Sehir sectiginizde imsakiye otomatik guncellenir.</p>
            </div>
        </div>
        <p class="lead mt-4 opacity-75 mx-auto" style="max-width: 700px;">
            Åehrinize ait gÃ¼nlÃ¼k namaz ve iftar vakitlerini aÅŸaÄŸÄ±dan takip edebilir, 
            Ramazan ayÄ± boyunca planlamalarÄ±nÄ±zÄ± yapabilirsiniz.
        </p>
    </div>

    <div class="card ramazan-card glass-card shadow-lg border-0 overflow-hidden animate-slide-up">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover imsakiye-table mb-0 text-center">
                    <thead>
                        <tr>
                            <th>GÃ¼n</th>
                            <th>Tarih</th>
                            <th>Ä°msak</th>
                            <th>GÃ¼neÅŸ</th>
                            <th>Ã–ÄŸle</th>
                            <th>Ä°kindi</th>
                            <th class="highlight-col">Ä°ftar</th>
                            <th>YatsÄ±</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for gun in imsakiye %}
                        <tr class="{% if gun.is_today %}imsakiye-aktif{% endif %}">
                            <td class="fw-bold">
                                {% if gun.is_today %}
                                    <span class="badge bg-success">BugÃ¼n</span>
                                {% else %}
                                    {{ forloop.counter }}. GÃ¼n
                                {% endif %}
                            </td>
                            <td class="small">{{ gun.tarih }}</td>
                            <td>{{ gun.imsak }}</td>
                            <td>{{ gun.gunes }}</td>
                            <td>{{ gun.ogle }}</td>
                            <td>{{ gun.ikindi }}</td>
                            <td class="fw-bold highlight-col">{{ gun.aksam }}</td>
                            <td>{{ gun.yatsÄ± }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
    /* 1. KART VE ARKA PLAN */
    .glass-card {
        background: var(--card-bg) !important;
        backdrop-filter: blur(10px);
        border: 1px solid var(--nav-border) !important;
        border-radius: 20px;
    }

    /* 2. TABLO GENEL */
    .imsakiye-table {
        background: transparent !important;
        margin-bottom: 0;
        /* Siyah temada yazÄ±lar buradaki deÄŸiÅŸkenden beslenecek */
        color: var(--text-color) !important;
    }

    .imsakiye-table thead th {
        background: rgba(0, 0, 0, 0.05) !important;
        color: var(--accent-color) !important;
        font-size: 0.8rem;
        letter-spacing: 1px;
        text-transform: uppercase;
        border: none;
        padding: 20px 10px;
    }

    [data-theme="dark"] .imsakiye-table thead th {
        background: rgba(255, 255, 255, 0.05) !important;
    }

    /* 3. SATIR VE HÃœCRELER */
    .imsakiye-table td {
        padding: 16px 10px;
        vertical-align: middle;
        border-bottom: 1px solid var(--nav-border) !important;
        background: transparent !important;
        color: inherit !important;
    }

    /* Zebra SatÄ±rlar */
    [data-theme="light"] .imsakiye-table tbody tr:nth-child(even) {
        background-color: rgba(0, 0, 0, 0.02) !important;
    }
    [data-theme="dark"] .imsakiye-table tbody tr:nth-child(even) {
        background-color: rgba(255, 255, 255, 0.02) !important;
    }

    /* 4. BUGÃœNÃœN SATIRI (SARI VURGU) */
    /* KullanÄ±cÄ±nÄ±n istediÄŸi gibi her iki temada da sarÄ± arka plan siyah yazÄ± */
    .imsakiye-aktif {
        background-color: #ffc107 !important;
        border-left: 5px solid var(--accent-color) !important;
    }

    .imsakiye-aktif td {
        color: #212529 !important; /* BugÃ¼nÃ¼n satÄ±rÄ±nda yazÄ± her zaman okunaklÄ± siyah/koyu */
        font-weight: 700;
    }

    /* 5. Ã–ZEL SÃœTUN (Ä°FTAR) */
    .highlight-col {
        color: #ffc107 !important;
        background: rgba(255, 193, 7, 0.02);
    }

    /* Animasyonlar */
    .animate-slide-up {
        animation: slideUp 0.8s ease-out;
    }

    @keyframes slideUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    @media (max-width: 768px) {
        .imsakiye-table { font-size: 0.85rem; }
        .display-3 { font-size: 2.2rem; }
    }
</style>

<script>
    // BugÃ¼nÃ¼n satÄ±rÄ±na otomatik odaklanma
    document.addEventListener('DOMContentLoaded', function() {
        const todayRow = document.querySelector('.imsakiye-aktif');
        if (todayRow) {
            setTimeout(() => {
                todayRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 500);
        }
    });
</script>
{% endblock %}
